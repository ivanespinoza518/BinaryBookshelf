<div class="author-edit">
    <h1>{{title}}</h1>
    @if (id && !author) {
      <p><em>Loading...</em></p>
    }
    
    <form [formGroup]="form" (ngSubmit)="onSubmit()">
  
      <!-- Name -->
      <mat-form-field>
        <mat-label>Name:</mat-label>
        <input matInput formControlName="name" required
               placeholder="Type a name">
        @if (form.controls['name'].errors?.['required']) {
          <mat-error>Name is required.</mat-error>
        }
        @if (form.controls['name'].errors?.['isDupeField']) {
          <mat-error>Name already exists: please enter another.</mat-error>
        }
      </mat-form-field>
  
      <!-- Background -->
      <mat-form-field>
        <mat-label>Background:</mat-label>
        <input matInput formControlName="background" required
               placeholder="Type in author background">
        @if (form.controls['background'].errors?.['required']) {
          <mat-error>Background is required.</mat-error>
        }
        @if (form.controls['background'].errors?.['isDupeField']) {
          <mat-error>This background already exists: please enter another.</mat-error>
        }
      </mat-form-field>

      <div>
        <button mat-flat-button color="primary"
                type="submit" [disabled]="!form.valid">
          {{ id ? "Save" : "Create" }}
        </button>
        <button mat-flat-button color="secondary"
                [routerLink]="['/authors']">
          Cancel
        </button>
      </div>
    </form>
  </div>